{"version":3,"sources":["index.ts"],"names":[],"mappings":";AAsJA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IA9FA,MAAM,EAEQ,YAAA,GADJ,KAAA,QAAgC,KAEjC,KAAA,QAAO,OAAA,OAAA,CACV,GAAI,gBACJ,KAAM,GACN,QAAS,GACT,QAAS,GACT,KAAM,GACN,MAAO,IACP,MAAO,IACP,MAAO,IACJ,GAGI,OACJ,KAAA,cAAc,gBAEP,UACN,MAAA,EAAK,SAAS,eAAe,KAAK,QAAQ,IAC3C,IACF,EAAA,UAAY,IAOE,cACX,MAAA,GAAE,GAAO,KAAK,QAChB,IAAA,EAAU,SAAS,eAAe,GAiB/B,OAhBF,KACO,EAAA,SAAS,cAAc,QACzB,aAAa,KAAM,GAEnB,EAAA,MAAM,cAAgB,OACtB,EAAA,MAAM,SAAW,QACjB,EAAA,MAAM,IAAM,IACZ,EAAA,MAAM,OAAS,OACf,EAAA,MAAM,MAAQ,QACd,EAAA,MAAM,OAAS,QACf,EAAA,MAAM,QAAU,OAChB,EAAA,MAAM,eAAiB,eACvB,EAAA,MAAM,aAAe,eACrB,EAAA,MAAM,SAAW,OAChB,SAAA,KAAK,YAAY,IAErB,KAOY,gBAEb,MAAA,EAAY,KAAK,IACrB,SAAS,KAAK,YACd,SAAS,KAAK,aAEV,EAAa,KAAK,IACtB,SAAS,KAAK,aACd,SAAS,KAAK,cAGV,EACJ,KAAK,IAAI,KAAK,QAAQ,OAAS,KAAK,QAAQ,KAC5C,KAAK,IAAI,KAAK,QAAQ,OAAS,KAAK,QAAQ,MAGxC,EACJ,KAAK,KAAK,GAAc,EAAS,EAAI,KAAK,QAAQ,UAClD,KAAK,KAAK,GAAa,KAAK,QAAQ,MAAQ,EAAI,KAAK,QAAQ,UAEzD,EAAM,SAAS,yBAEhB,IAAA,IAAI,EAAI,EAAG,GAAK,EAAO,IAAK,CACzB,MAAA,EAAO,SAAS,cAAc,OAC9B,EAAO,SAAS,eAAe,KAAK,QAAQ,MAC7C,EAAA,YAAY,GACZ,EAAA,MAAM,qBAAuB,KAAK,QAAQ,YAC1C,EAAA,MAAM,MAAQ,KAAK,QAAQ,MAAQ,KACnC,EAAA,MAAM,WAAa,KAAK,QAAQ,QAAU,KAC1C,EAAA,MAAM,YAAc,KAAK,QAAQ,QAAU,KAC3C,EAAA,MAAM,UAAY,KAAK,QAAQ,QAAU,KACzC,EAAA,MAAM,aAAe,KAAK,QAAQ,QAAU,KAC5C,EAAA,MAAM,QAAU,KAAK,QAAQ,MAAQ,GACtC,EAAA,YAAY,GAGT,SAAA,eAAe,KAAK,QAAQ,IAAI,YAAY,IAIzD,QAAA,QAAe","file":"index.map","sourceRoot":"..","sourcesContent":["/**\n * 生成网站水印\n * @author Eward\n * 18/08/31\n */\nexport type watermarkSettingType = {\n  /**\n   * 包裹dom的id\n   * @author Eward\n   * 18/08/31\n   */\n  id?: string;\n  /**\n   * 水印显示的字\n   * @author Eward\n   * 18/08/31\n   */\n  text: string;\n  /**\n   * 横向之间间距\n   * @author Eward\n   * 18/08/31\n   */\n  gutterX?: number;\n  /**\n   * 纵向之间间距\n   * @author Eward\n   * 18/08/31\n   */\n  gutterY?: number;\n  /**\n   * 字体大小\n   * @author Eward\n   * 18/08/31\n   */\n  size?: number;\n  /**\n   * 透明度(0-1)\n   * @author Eward\n   * 18/08/31\n   */\n  alpha?: number;\n  /**\n   * 单个水印长度\n   * @author Eward\n   * 18/08/31\n   */\n  width?: number;\n  /**\n   * 水印倾斜度数\n   * @author Eward\n   * 18/08/31\n   */\n  angle?: number;\n};\n\nclass Watermark {\n  private setting: watermarkSettingType = null;\n  constructor(setting: watermarkSettingType) {\n    this.setting = {\n      id: \"watermark-web\",\n      text: \"\",\n      gutterX: 15,\n      gutterY: 15,\n      size: 15,\n      alpha: 0.35,\n      width: 200,\n      angle: 15,\n      ...setting\n    };\n  }\n  public init() {\n    this.gWrapperDOM().gWatermarkDOM();\n  }\n  public destory() {\n    const el = document.getElementById(this.setting.id);\n    if (!el) return;\n    el.innerHTML = \"\";\n  }\n  /**\n   * 生成包裹层\n   * @author Eward\n   * 18/08/31\n   */\n  private gWrapperDOM() {\n    const { id } = this.setting;\n    let wrapper = document.getElementById(id);\n    if (!wrapper) {\n      wrapper = document.createElement(\"div\");\n      wrapper.setAttribute(\"id\", id);\n      // --------- 使用flexbox --------- created at 18.08.31 -- by Eward\n      wrapper.style.pointerEvents = \"none\";\n      wrapper.style.position = \"fixed\";\n      wrapper.style.top = \"0\";\n      wrapper.style.zIndex = \"2000\";\n      wrapper.style.width = \"100vw\";\n      wrapper.style.height = \"100vh\";\n      wrapper.style.display = \"flex\";\n      wrapper.style.justifyContent = \"space-around\";\n      wrapper.style.alignContent = \"space-around\";\n      wrapper.style.flexWrap = \"wrap\";\n      document.body.appendChild(wrapper);\n    }\n    return this;\n  }\n  /**\n   * 循环生成每个水印dom\n   * @author Eward\n   * 18/08/31\n   */\n  private gWatermarkDOM() {\n    // --------- 取出屏幕宽高 --------- created at 18.08.31 -- by Eward\n    const max_width = Math.max(\n      document.body.scrollWidth,\n      document.body.clientWidth\n    );\n    const max_height = Math.max(\n      document.body.scrollHeight,\n      document.body.clientHeight\n    );\n    // --------- 计算出经过旋转后的水印实际高度 --------- created at 18.08.31 -- by Eward\n    const height =\n      Math.cos(this.setting.angle) * this.setting.size +\n      Math.sin(this.setting.angle) * this.setting.width;\n\n    // --------- 计算能生成多少个水印 --------- created at 18.08.31 -- by Eward\n    const total =\n      Math.ceil(max_height / (height + 2 * this.setting.gutterY)) *\n      Math.ceil(max_width / (this.setting.width + 2 * this.setting.gutterX));\n\n    const dom = document.createDocumentFragment();\n\n    for (let i = 1; i <= total; i++) {\n      const span = document.createElement(\"div\");\n      const text = document.createTextNode(this.setting.text);\n      span.appendChild(text);\n      span.style.transform = `rotate(-${this.setting.angle}deg)`;\n      span.style.width = this.setting.width + \"px\";\n      span.style.marginLeft = this.setting.gutterX + \"px\";\n      span.style.marginRight = this.setting.gutterX + \"px\";\n      span.style.marginTop = this.setting.gutterY + \"px\";\n      span.style.marginBottom = this.setting.gutterY + \"px\";\n      span.style.opacity = this.setting.alpha + \"\";\n      dom.appendChild(span);\n    }\n\n    document.getElementById(this.setting.id).appendChild(dom);\n  }\n}\n\nexport default Watermark;\n"]}